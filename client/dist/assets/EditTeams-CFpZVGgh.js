import{j as e,W as w,a as T,r as n,X as N,Y as k,B,T as b,Z as E,$ as M,C as R}from"./index-C23OQssH.js";import{T as F,a as L,b as O,c as p,d as t,e as P,u as q,S as D,A as I}from"./useDebounce-COy_CiWt.js";import{A as W}from"./AddButton-C02k6WTA.js";import{T as G}from"./TextField-D88AsIEZ.js";const H=({teams:l,isDelete:o=!1,handleRemove:i,isAdmin:s=!1})=>e.jsx("div",{children:e.jsx(F,{component:w,children:e.jsxs(L,{"aria-label":"teams table",children:[e.jsx(O,{children:e.jsxs(p,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Name"}),e.jsx(t,{align:"right",children:"Points"}),e.jsx(t,{align:"right",children:s&&"Members"}),o&&e.jsx(t,{align:"right",children:"Actions"})]})}),e.jsx(P,{children:l.map((a,c)=>e.jsxs(p,{children:[e.jsx(t,{component:"th",scope:"row",children:c+1}),e.jsx(t,{children:a.name}),e.jsx(t,{align:"right",children:a.points}),e.jsx(t,{align:"right",children:s&&a.members.length}),o&&e.jsx(t,{align:"right",children:e.jsx(T,{variant:"contained",color:"secondary",onClick:()=>i(a.id),children:"Remove"})})]},a.id))})]})})}),Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},X=({open:l,handleClose:o})=>{const[i,s]=n.useState(""),[a,c]=n.useState({}),[m]=N(),u=()=>{const r={};return i||(r.teamName="Team name is required"),c(r),Object.keys(r).length===0},h=async()=>{if(u())try{await m({name:i}),s(""),c({}),o()}catch(r){console.error("Error adding team:",r)}};return e.jsx(k,{open:l,onClose:o,"aria-labelledby":"add-team-modal-title","aria-describedby":"add-team-modal-description",children:e.jsxs(B,{sx:Q,children:[e.jsx(b,{id:"add-team-modal-title",variant:"h6",component:"h2",children:"Add New Team"}),e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,id:"teamName",label:"Team Name",name:"teamName",autoFocus:!0,value:i,onChange:r=>s(r.target.value),error:!!a.teamName,helperText:a.teamName}),e.jsx(T,{variant:"contained",color:"primary",onClick:h,style:{marginTop:"16px"},children:"Add Team"})]})})},J=()=>{var g;const{data:l,error:o,isLoading:i}=E(),s=l==null?void 0:l.teams,[a,c]=n.useState(!1),[m,u]=n.useState(""),h=q(m,300),[r,{isError:f,error:x}]=M(),y=n.useCallback(()=>c(!0),[]),C=n.useCallback(()=>c(!1),[]),v=n.useCallback(d=>u(d.target.value),[]),S=n.useCallback(async d=>{try{await r(d)}catch(j){console.log(j)}},[r]),A=n.useMemo(()=>s?s.filter(d=>d.name.toLowerCase().includes(h.toLowerCase())).sort((d,j)=>j.points-d.points):[],[s,h]);return i?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(R,{})}):e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"h4",align:"center",gutterBottom:!0,children:"Teams"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginBottom:"16px"},children:[e.jsx(W,{onClick:y,label:"Add"}),e.jsx(D,{label:"Search",value:m,onChange:v,placeholder:"Search Teams..."})]}),f||o&&e.jsx(I,{severity:"error",children:((g=x==null?void 0:x.data)==null?void 0:g.message)||o}),e.jsx(H,{teams:A,isDelete:!0,handleRemove:S,isAdmin:!0}),e.jsx(X,{open:a,handleClose:C})]})};export{J as default};
