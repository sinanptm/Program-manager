import{r as a,a4 as H,j as e,Y as M,B as N,T as h,a1 as o,a as v,b as W,C as D}from"./index-DUUKgbV5.js";import{P as J}from"./ProgramList-BzmkPuVV.js";import{T as U,F as f,I as S,S as P}from"./TextField-CmRmFZgE.js";import{F as k}from"./FilterButton-CWiTerSm.js";import{u as V,S as G,A as Q}from"./useDebounce-KC95HaKY.js";import{A as R}from"./AddButton-DRkXyOua.js";const Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},z=({open:t,handleClose:n})=>{const[i,c]=a.useState(""),[d,u]=a.useState(""),[g,m]=a.useState(""),[s,x]=a.useState({}),[l]=H(),y=()=>{const r={};return i||(r.programName="Program name is required"),d||(r.category="Category selection is required"),g||(r.type="Type selection is required"),x(r),Object.keys(r).length===0},j=async()=>{if(y())try{await l({name:i,category:d,type:g}),c(""),u(""),m(""),x({}),n()}catch(r){console.error("Error adding program:",r)}};return e.jsx(M,{open:t,onClose:n,"aria-labelledby":"add-program-modal-title","aria-describedby":"add-program-modal-description",children:e.jsxs(N,{sx:Y,children:[e.jsx(h,{id:"add-program-modal-title",variant:"h6",component:"h2",children:"Add New Program"}),e.jsx(U,{margin:"normal",required:!0,fullWidth:!0,id:"programName",label:"Program Name",name:"programName",autoFocus:!0,value:i,onChange:r=>c(r.target.value),error:!!s.programName,helperText:s.programName}),e.jsxs(f,{fullWidth:!0,margin:"normal",required:!0,error:!!s.category,children:[e.jsx(S,{id:"category-label",children:"Category"}),e.jsxs(P,{labelId:"category-label",id:"category",value:d,label:"Category",onChange:r=>u(r.target.value),children:[e.jsx(o,{value:"lp",children:"LP"}),e.jsx(o,{value:"up",children:"UP"}),e.jsx(o,{value:"hs",children:"HS"}),e.jsx(o,{value:"hss",children:"HSS"}),e.jsx(o,{value:"junior",children:"Junior"})]}),s.category&&e.jsx(h,{color:"error",variant:"caption",children:s.category})]}),e.jsxs(f,{fullWidth:!0,margin:"normal",required:!0,error:!!s.type,children:[e.jsx(S,{id:"type-label",children:"Type"}),e.jsxs(P,{labelId:"type-label",id:"type",value:g,label:"Type",onChange:r=>m(r.target.value),children:[e.jsx(o,{value:"on-stage",children:"On-Stage"}),e.jsx(o,{value:"off-stage",children:"Off-Stage"}),e.jsx(o,{value:"online",children:"Online"})]}),s.type&&e.jsx(h,{color:"error",variant:"caption",children:s.type})]}),e.jsx(v,{variant:"contained",color:"primary",onClick:j,style:{marginTop:"16px"},children:"Add Program"})]})})},ae=()=>{const[t,n]=a.useState(1),i=10,[c,d]=a.useState(""),[u,g]=a.useState(""),[m,s]=a.useState(""),x=V(m,300),{data:l,error:y,isLoading:j}=W({page:t,limit:i,status:c,category:u,search:x}),r=l==null?void 0:l.programs,b=(l==null?void 0:l.totalPages)||1,[T,C]=a.useState(!1),F=a.useCallback(()=>C(!0),[]),A=a.useCallback(()=>C(!1),[]),O=a.useCallback(p=>d(p),[]),w=a.useCallback(p=>g(p),[]),B=a.useCallback(p=>s(p.target.value),[]),E=a.useCallback(()=>{t<b&&n(t+1)},[t,b]),I=a.useCallback(()=>{t>1&&n(t-1)},[t]);if(j)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(D,{})});const q=[{label:"None",value:""},{label:"Done",value:"done"},{label:"Evaluating",value:"evaluating"},{label:"Waiting",value:"waiting"}],L=[{label:"None",value:""},{label:"LP",value:"lp"},{label:"UP",value:"up"},{label:"HS",value:"hs"},{label:"HSS",value:"hss"},{label:"Junior",value:"junior"}];return e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"h4",align:"center",gutterBottom:!0,children:"Programs"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsx(R,{onClick:F,label:"Add"}),e.jsx(G,{label:"Search",value:m,onChange:B,placeholder:"Search programs..."}),e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx(k,{label:"Status",options:q,selectedValue:c,onChange:O}),e.jsx(k,{label:"Category",options:L,selectedValue:u,onChange:w})]})]}),y&&e.jsx(Q,{severity:"error",children:y}),e.jsx(J,{programs:r,isAdmin:!0}),e.jsxs(N,{display:"flex",justifyContent:"center",mt:2,children:[e.jsx(v,{variant:"contained",color:"primary",onClick:I,disabled:t===1,children:"Previous"}),e.jsxs(h,{variant:"body1",mx:2,children:["Page ",t," of ",b]}),e.jsx(v,{variant:"contained",color:"primary",onClick:E,disabled:t===b,children:"Next"})]}),e.jsx(z,{open:T,handleClose:A})]})};export{ae as default};
