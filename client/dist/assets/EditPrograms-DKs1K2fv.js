import{r as a,ai as R,j as e,ab as z,B as p,T as y,af as m,L as D,a as H}from"./index-Dcg4xgJR.js";import{P as M}from"./ProgramList-CrueGadX.js";import{T as V,F as C,I as S,S as w}from"./TextField-7ziQW2wA.js";import{S as P,u as J,A as U,L as G,P as Q}from"./ListSkeleton-aXEP7941.js";import{A as T}from"./AddButton-2IK6SrWP.js";import{F as b}from"./FilterButton-DYyRnlPh.js";const K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},X=({open:n,handleClose:c})=>{const[i,o]=a.useState(""),[s,l]=a.useState(""),[d,u]=a.useState(""),[t,x]=a.useState({}),[g]=R(),j=()=>{const r={};return i||(r.programName="Program name is required"),s||(r.category="Category selection is required"),d||(r.type="Type selection is required"),x(r),Object.keys(r).length===0},v=async()=>{if(j())try{await g({name:i,category:s,type:d}),o(""),l(""),u(""),x({}),c()}catch(r){console.error("Error adding program:",r)}};return e.jsx(z,{open:n,onClose:c,"aria-labelledby":"add-program-modal-title","aria-describedby":"add-program-modal-description",children:e.jsxs(p,{sx:K,children:[e.jsx(y,{id:"add-program-modal-title",variant:"h6",component:"h2",children:"Add New Program"}),e.jsx(V,{margin:"normal",required:!0,fullWidth:!0,id:"programName",label:"Program Name",name:"programName",autoFocus:!0,value:i,onChange:r=>o(r.target.value),error:!!t.programName,helperText:t.programName}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.category,children:[e.jsx(S,{id:"category-label",children:"Category"}),e.jsxs(w,{labelId:"category-label",id:"category",value:s,label:"Category",onChange:r=>l(r.target.value),children:[e.jsx(m,{value:"lp",children:"LP"}),e.jsx(m,{value:"up",children:"UP"}),e.jsx(m,{value:"hs",children:"HS"}),e.jsx(m,{value:"hss",children:"HSS"}),e.jsx(m,{value:"junior",children:"Junior"})]}),t.category&&e.jsx(y,{color:"error",variant:"caption",children:t.category})]}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.type,children:[e.jsx(S,{id:"type-label",children:"Type"}),e.jsxs(w,{labelId:"type-label",id:"type",value:d,label:"Type",onChange:r=>u(r.target.value),children:[e.jsx(m,{value:"on-stage",children:"On-Stage"}),e.jsx(m,{value:"off-stage",children:"Off-Stage"}),e.jsx(m,{value:"online",children:"Online"})]}),t.type&&e.jsx(y,{color:"error",variant:"caption",children:t.type})]}),e.jsx(D,{variant:"contained",color:"primary",onClick:v,style:{marginTop:"16px"},children:"Add Program"})]})})},Y=(n=300)=>{const[c,i]=a.useState(window.innerWidth),o=a.useRef(Date.now()),s=a.useCallback(()=>{const l=Date.now();l-o.current>=n&&(o.current=l,i(window.innerWidth))},[n]);return a.useEffect(()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),c},Z=({handleCategoryChange:n,handleOpen:c,handleSearchChange:i,handleStatusChange:o,searchTerm:s,statusFilter:l,statusOptions:d,categoryFilter:u,categoryOptions:t})=>{const x=Y(300);return e.jsx(p,{marginBottom:"16px",children:x>400?e.jsxs(p,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(T,{onClick:c,label:"Add"}),e.jsx(P,{label:"Search",value:s,onChange:i,placeholder:"Search programs..."}),e.jsxs(p,{display:"flex",gap:"16px",children:[e.jsx(b,{label:"Status",options:d,selectedValue:l,onChange:o}),e.jsx(b,{label:"Category",options:t,selectedValue:u,onChange:n})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{marginBottom:"8px",children:e.jsx(P,{label:"Search",value:s,onChange:i,placeholder:"Search programs...",fullWidth:!0})}),e.jsxs(p,{display:"flex",justifyContent:"space-between",children:[e.jsx(T,{onClick:c,label:"Add"}),e.jsxs(p,{display:"flex",gap:"8px",children:[e.jsx(b,{label:"Status",options:d,selectedValue:l,onChange:o}),e.jsx(b,{label:"Category",options:t,selectedValue:u,onChange:n})]})]})]})})},se=()=>{const[n,c]=a.useState(1),i=10,[o,s]=a.useState(""),[l,d]=a.useState(""),[u,t]=a.useState(""),x=J(u,300),{data:g,error:j,isLoading:v,isFetching:r}=H({page:n,limit:i,status:o,category:l,search:x}),k=g==null?void 0:g.programs,F=(g==null?void 0:g.totalPages)||1,[A,f]=a.useState(!1),N=a.useCallback(()=>f(!0),[]),E=a.useCallback(()=>f(!1),[]),L=a.useCallback(h=>s(h),[]),W=a.useCallback(h=>d(h),[]),B=a.useCallback(h=>t(h.target.value),[]),q=a.useCallback(h=>{c(h)},[]),I=[{label:"None",value:""},{label:"Done",value:"done"},{label:"Evaluating",value:"evaluating"},{label:"Waiting",value:"waiting"}],O=[{label:"None",value:""},{label:"LP",value:"lp"},{label:"UP",value:"up"},{label:"HS",value:"hs"},{label:"HSS",value:"hss"},{label:"Junior",value:"junior"}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h4",align:"center",gutterBottom:!0,children:"Programs"}),e.jsx(Z,{searchTerm:u,handleSearchChange:B,handleOpen:N,statusOptions:I,statusFilter:o,handleStatusChange:L,categoryOptions:O,categoryFilter:l,handleCategoryChange:W}),j&&e.jsx(U,{severity:"error",children:j.message}),v||r?e.jsx(G,{rows:10,columns:5}):e.jsxs(e.Fragment,{children:[e.jsx(M,{programs:k,isAdmin:!0}),e.jsx(Q,{page:n,totalPages:F,onPageChange:q})]}),e.jsx(X,{open:A,handleClose:E})]})};export{se as default};
