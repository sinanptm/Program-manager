import{r as t,X as v,j as e,Y as S,B as A,T,a as N,u as k,Z as w,C as B}from"./index-DUUKgbV5.js";import{T as E}from"./TeamList-DF7rL5QA.js";import{u as M,S as F,A as L}from"./useDebounce-KC95HaKY.js";import{A as D}from"./AddButton-DRkXyOua.js";import{T as O}from"./TextField-CmRmFZgE.js";const R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},q=({open:o,handleClose:n})=>{const[l,s]=t.useState(""),[m,i]=t.useState({}),[d]=v(),u=()=>{const a={};return l||(a.teamName="Team name is required"),i(a),Object.keys(a).length===0},c=async()=>{if(u())try{await d({name:l}),s(""),i({}),n()}catch(a){console.error("Error adding team:",a)}};return e.jsx(S,{open:o,onClose:n,"aria-labelledby":"add-team-modal-title","aria-describedby":"add-team-modal-description",children:e.jsxs(A,{sx:R,children:[e.jsx(T,{id:"add-team-modal-title",variant:"h6",component:"h2",children:"Add New Team"}),e.jsx(O,{margin:"normal",required:!0,fullWidth:!0,id:"teamName",label:"Team Name",name:"teamName",autoFocus:!0,value:l,onChange:a=>s(a.target.value),error:!!m.teamName,helperText:m.teamName}),e.jsx(N,{variant:"contained",color:"primary",onClick:c,style:{marginTop:"16px"},children:"Add Team"})]})})},X=()=>{var x;const{data:o,error:n,isLoading:l}=k(),s=o==null?void 0:o.teams,[m,i]=t.useState(!1),[d,u]=t.useState(""),c=M(d,300),[a,{isError:g,error:h}]=w(),f=t.useCallback(()=>i(!0),[]),j=t.useCallback(()=>i(!1),[]),y=t.useCallback(r=>u(r.target.value),[]),b=t.useCallback(async r=>{try{await a(r)}catch(p){console.log(p)}},[a]),C=t.useMemo(()=>s?s.filter(r=>r.name.toLowerCase().includes(c.toLowerCase())).sort((r,p)=>p.points-r.points):[],[s,c]);return l?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(B,{})}):e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"h4",align:"center",gutterBottom:!0,children:"Teams"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginBottom:"16px"},children:[e.jsx(D,{onClick:f,label:"Add"}),e.jsx(F,{label:"Search",value:d,onChange:y,placeholder:"Search Teams..."})]}),g||n&&e.jsx(L,{severity:"error",children:((x=h==null?void 0:h.data)==null?void 0:x.message)||n}),e.jsx(E,{teams:C,isDelete:!0,handleRemove:b,isAdmin:!0}),e.jsx(q,{open:m,handleClose:j})]})};export{X as default};
