import{r,ai as H,j as e,ab as M,B as F,T as y,af as o,L as W,a as G}from"./index-Y2TAvrbt.js";import{P as D}from"./ProgramList-BBedoseq.js";import{T as J,F as C,I as S,S as f}from"./TextField-B4VV8Oga.js";import{S as U,u as V,A as Q,L as R,P as z}from"./ListSkeleton-DIHVgHpc.js";import{A as K}from"./AddButton-BHJSCC94.js";import{F as P}from"./FilterButton-BUPMg7kb.js";import{G as j}from"./Grid-BtkvXZmK.js";const X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Y=({open:m,handleClose:p})=>{const[l,n]=r.useState(""),[i,c]=r.useState(""),[u,d]=r.useState(""),[t,h]=r.useState({}),[s]=H(),x=()=>{const a={};return l||(a.programName="Program name is required"),i||(a.category="Category selection is required"),u||(a.type="Type selection is required"),h(a),Object.keys(a).length===0},b=async()=>{if(x())try{await s({name:l,category:i,type:u}),n(""),c(""),d(""),h({}),p()}catch(a){console.error("Error adding program:",a)}};return e.jsx(M,{open:m,onClose:p,"aria-labelledby":"add-program-modal-title","aria-describedby":"add-program-modal-description",children:e.jsxs(F,{sx:X,children:[e.jsx(y,{id:"add-program-modal-title",variant:"h6",component:"h2",children:"Add New Program"}),e.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"programName",label:"Program Name",name:"programName",autoFocus:!0,value:l,onChange:a=>n(a.target.value),error:!!t.programName,helperText:t.programName}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.category,children:[e.jsx(S,{id:"category-label",children:"Category"}),e.jsxs(f,{labelId:"category-label",id:"category",value:i,label:"Category",onChange:a=>c(a.target.value),children:[e.jsx(o,{value:"lp",children:"LP"}),e.jsx(o,{value:"up",children:"UP"}),e.jsx(o,{value:"hs",children:"HS"}),e.jsx(o,{value:"hss",children:"HSS"}),e.jsx(o,{value:"junior",children:"Junior"})]}),t.category&&e.jsx(y,{color:"error",variant:"caption",children:t.category})]}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.type,children:[e.jsx(S,{id:"type-label",children:"Type"}),e.jsxs(f,{labelId:"type-label",id:"type",value:u,label:"Type",onChange:a=>d(a.target.value),children:[e.jsx(o,{value:"on-stage",children:"On-Stage"}),e.jsx(o,{value:"off-stage",children:"Off-Stage"}),e.jsx(o,{value:"online",children:"Online"})]}),t.type&&e.jsx(y,{color:"error",variant:"caption",children:t.type})]}),e.jsx(W,{variant:"contained",color:"primary",onClick:b,style:{marginTop:"16px"},children:"Add Program"})]})})},Z=({searchTerm:m,handleSearchChange:p,handleOpen:l,statusOptions:n,statusFilter:i,handleStatusChange:c,categoryOptions:u,categoryFilter:d,handleCategoryChange:t})=>e.jsx(F,{marginBottom:"16px",children:e.jsxs(j,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(j,{item:!0,xs:12,sm:8,md:6,display:"flex",justifyContent:"space-between",children:[e.jsx(K,{onClick:l,label:"Add"}),e.jsx(U,{label:"Search",value:m,onChange:p,placeholder:"Search programs..."})]}),e.jsxs(j,{item:!0,xs:12,sm:4,md:6,display:"flex",justifyContent:"space-between",children:[e.jsx(P,{label:"Status",options:n,selectedValue:i,onChange:c}),e.jsx(P,{label:"Category",options:u,selectedValue:d,onChange:t})]})]})}),oe=()=>{const[m,p]=r.useState(1),l=10,[n,i]=r.useState(""),[c,u]=r.useState(""),[d,t]=r.useState(""),h=V(d,300),{data:s,error:x,isLoading:b,isFetching:a}=G({page:m,limit:l,status:n,category:c,search:h}),T=s==null?void 0:s.programs,k=(s==null?void 0:s.totalPages)||1,[A,v]=r.useState(!1),N=r.useCallback(()=>v(!0),[]),w=r.useCallback(()=>v(!1),[]),L=r.useCallback(g=>i(g),[]),O=r.useCallback(g=>u(g),[]),B=r.useCallback(g=>t(g.target.value),[]),E=r.useCallback(g=>{p(g)},[]),q=[{label:"None",value:""},{label:"Done",value:"done"},{label:"Evaluating",value:"evaluating"},{label:"Waiting",value:"waiting"}],I=[{label:"None",value:""},{label:"LP",value:"lp"},{label:"UP",value:"up"},{label:"HS",value:"hs"},{label:"HSS",value:"hss"},{label:"Junior",value:"junior"}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h4",align:"center",gutterBottom:!0,children:"Programs"}),e.jsx(Z,{searchTerm:d,handleSearchChange:B,handleOpen:N,statusOptions:q,statusFilter:n,handleStatusChange:L,categoryOptions:I,categoryFilter:c,handleCategoryChange:O}),x&&e.jsx(Q,{severity:"error",children:x.message}),b||a?e.jsx(R,{rows:10,columns:5}):e.jsxs(e.Fragment,{children:[e.jsx(D,{programs:T,isAdmin:!0}),e.jsx(z,{page:m,totalPages:k,onPageChange:E})]}),e.jsx(Y,{open:A,handleClose:w})]})};export{oe as default};
