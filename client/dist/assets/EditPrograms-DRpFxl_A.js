import{r,a4 as q,j as e,Y as L,B as y,T as b,a1 as l,g as H,a as M,C as W}from"./index-CLFLJj7i.js";import{P as D}from"./ProgramList-BE8Zcids.js";import{T as J,F as C,I as S,S as f}from"./TextField-Bfifr5H5.js";import{F as P}from"./FilterButton-rNzfEMmA.js";import{u as U,S as V,A as G,P as Q}from"./Pagination-TmjqAlHS.js";import{A as R}from"./AddButton-A5j_oxtx.js";const Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},z=({open:m,handleClose:p})=>{const[n,i]=r.useState(""),[c,u]=r.useState(""),[d,g]=r.useState(""),[t,h]=r.useState({}),[s]=q(),x=()=>{const a={};return n||(a.programName="Program name is required"),c||(a.category="Category selection is required"),d||(a.type="Type selection is required"),h(a),Object.keys(a).length===0},j=async()=>{if(x())try{await s({name:n,category:c,type:d}),i(""),u(""),g(""),h({}),p()}catch(a){console.error("Error adding program:",a)}};return e.jsx(L,{open:m,onClose:p,"aria-labelledby":"add-program-modal-title","aria-describedby":"add-program-modal-description",children:e.jsxs(y,{sx:Y,children:[e.jsx(b,{id:"add-program-modal-title",variant:"h6",component:"h2",children:"Add New Program"}),e.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"programName",label:"Program Name",name:"programName",autoFocus:!0,value:n,onChange:a=>i(a.target.value),error:!!t.programName,helperText:t.programName}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.category,children:[e.jsx(S,{id:"category-label",children:"Category"}),e.jsxs(f,{labelId:"category-label",id:"category",value:c,label:"Category",onChange:a=>u(a.target.value),children:[e.jsx(l,{value:"lp",children:"LP"}),e.jsx(l,{value:"up",children:"UP"}),e.jsx(l,{value:"hs",children:"HS"}),e.jsx(l,{value:"hss",children:"HSS"}),e.jsx(l,{value:"junior",children:"Junior"})]}),t.category&&e.jsx(b,{color:"error",variant:"caption",children:t.category})]}),e.jsxs(C,{fullWidth:!0,margin:"normal",required:!0,error:!!t.type,children:[e.jsx(S,{id:"type-label",children:"Type"}),e.jsxs(f,{labelId:"type-label",id:"type",value:d,label:"Type",onChange:a=>g(a.target.value),children:[e.jsx(l,{value:"on-stage",children:"On-Stage"}),e.jsx(l,{value:"off-stage",children:"Off-Stage"}),e.jsx(l,{value:"online",children:"Online"})]}),t.type&&e.jsx(b,{color:"error",variant:"caption",children:t.type})]}),e.jsx(H,{variant:"contained",color:"primary",onClick:j,style:{marginTop:"16px"},children:"Add Program"})]})})},ae=()=>{const[m,p]=r.useState(1),n=10,[i,c]=r.useState(""),[u,d]=r.useState(""),[g,t]=r.useState(""),h=U(g,300),{data:s,error:x,isLoading:j}=M({page:m,limit:n,status:i,category:u,search:h}),a=s==null?void 0:s.programs,T=(s==null?void 0:s.totalPages)||1,[F,v]=r.useState(!1),A=r.useCallback(()=>v(!0),[]),N=r.useCallback(()=>v(!1),[]),k=r.useCallback(o=>c(o),[]),O=r.useCallback(o=>d(o),[]),w=r.useCallback(o=>t(o.target.value),[]),B=r.useCallback(o=>{p(o)},[]);if(j)return e.jsx(y,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(W,{})});const E=[{label:"None",value:""},{label:"Done",value:"done"},{label:"Evaluating",value:"evaluating"},{label:"Waiting",value:"waiting"}],I=[{label:"None",value:""},{label:"LP",value:"lp"},{label:"UP",value:"up"},{label:"HS",value:"hs"},{label:"HSS",value:"hss"},{label:"Junior",value:"junior"}];return e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"h4",align:"center",gutterBottom:!0,children:"Programs"}),e.jsxs(y,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",children:[e.jsx(R,{onClick:A,label:"Add"}),e.jsx(V,{label:"Search",value:g,onChange:w,placeholder:"Search programs..."}),e.jsxs(y,{display:"flex",gap:"16px",children:[e.jsx(P,{label:"Status",options:E,selectedValue:i,onChange:k}),e.jsx(P,{label:"Category",options:I,selectedValue:u,onChange:O})]})]}),x&&e.jsx(G,{severity:"error",children:x.message}),e.jsx(D,{programs:a,isAdmin:!0}),e.jsx(Q,{page:m,totalPages:T,onPageChange:B}),e.jsx(z,{open:F,handleClose:N})]})};export{ae as default};
