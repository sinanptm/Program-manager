import{r as a,aa as P,j as e,ab as B,B as i,T as y,L as E,u as F,ac as M}from"./index-Y2TAvrbt.js";import{T as D}from"./TeamList-C4KEnse7.js";import{u as O,S as R,A as q,L as G,P as I}from"./ListSkeleton-DIHVgHpc.js";import{A as Q}from"./AddButton-BHJSCC94.js";import{T as W}from"./TextField-B4VV8Oga.js";const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},H=({open:m,handleClose:c})=>{const[o,t]=a.useState(""),[n,d]=a.useState({}),[u]=P(),l=()=>{const s={};return o||(s.teamName="Team name is required"),d(s),Object.keys(s).length===0},h=async()=>{if(l())try{await u({name:o}),t(""),d({}),c()}catch(s){console.error("Error adding team:",s)}};return e.jsx(B,{open:m,onClose:c,"aria-labelledby":"add-team-modal-title","aria-describedby":"add-team-modal-description",children:e.jsxs(i,{sx:z,children:[e.jsx(y,{id:"add-team-modal-title",variant:"h6",component:"h2",children:"Add New Team"}),e.jsx(W,{margin:"normal",required:!0,fullWidth:!0,id:"teamName",label:"Team Name",name:"teamName",autoFocus:!0,value:o,onChange:s=>t(s.target.value),error:!!n.teamName,helperText:n.teamName}),e.jsx(E,{variant:"contained",color:"primary",onClick:h,style:{marginTop:"16px"},children:"Add Team"})]})})},Y=()=>{var b;const[m,c]=a.useState(1),o=10,{data:t,error:n,isLoading:d,isFetching:u}=F({page:m,limit:o}),l=t==null?void 0:t.teams,h=(t==null?void 0:t.totalPages)||1,[s,g]=a.useState(!1),[T,C]=a.useState(""),f=O(T,300),[j,{isError:S,error:x}]=M(),v=a.useCallback(()=>g(!0),[]),A=a.useCallback(()=>g(!1),[]),k=a.useCallback(r=>C(r.target.value),[]),w=a.useCallback(async r=>{try{await j(r)}catch(p){console.log(p)}},[j]),N=a.useCallback(r=>{c(r)},[]),L=a.useMemo(()=>l?l.filter(r=>r.name.toLowerCase().includes(f.toLowerCase())).sort((r,p)=>p.points-r.points):[],[l,f]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h4",align:"center",gutterBottom:!0,children:"Teams"}),e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",children:[e.jsx(i,{display:"flex",flex:"1",children:e.jsx(Q,{onClick:v,label:"Add"})}),e.jsx(i,{display:"flex",flex:"2",justifyContent:"center",children:e.jsx(R,{label:"Search",value:T,onChange:k,placeholder:"Search Teams..."})}),e.jsx(i,{flex:"1"})]}),S||n&&e.jsx(q,{severity:"error",children:((b=x==null?void 0:x.data)==null?void 0:b.message)||n.message}),d||u?e.jsx(G,{rows:10,columns:4}):e.jsxs(e.Fragment,{children:[e.jsx(D,{teams:L,isDelete:!0,handleRemove:w,isAdmin:!0}),e.jsx(I,{page:m,totalPages:h,onPageChange:N})]}),e.jsx(H,{open:s,handleClose:A})]})};export{Y as default};
