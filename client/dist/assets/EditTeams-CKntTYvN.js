import{r as a,W as B,j as e,X as E,B as f,T as y,f as F,u as L,Y as M}from"./index-Cdqi_yau.js";import{T as D}from"./TeamList-DEN3-iXu.js";import{u as O,S as R,A as q,L as W,P as G}from"./ListSkeleton-CBzyakC8.js";import{A as I}from"./AddButton-CptLbrMs.js";import{T as Q}from"./TextField-D-ULi0DR.js";const X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Y=({open:m,handleClose:i})=>{const[o,t]=a.useState(""),[n,c]=a.useState({}),[d]=B(),l=()=>{const s={};return o||(s.teamName="Team name is required"),c(s),Object.keys(s).length===0},u=async()=>{if(l())try{await d({name:o}),t(""),c({}),i()}catch(s){console.error("Error adding team:",s)}};return e.jsx(E,{open:m,onClose:i,"aria-labelledby":"add-team-modal-title","aria-describedby":"add-team-modal-description",children:e.jsxs(f,{sx:X,children:[e.jsx(y,{id:"add-team-modal-title",variant:"h6",component:"h2",children:"Add New Team"}),e.jsx(Q,{margin:"normal",required:!0,fullWidth:!0,id:"teamName",label:"Team Name",name:"teamName",autoFocus:!0,value:o,onChange:s=>t(s.target.value),error:!!n.teamName,helperText:n.teamName}),e.jsx(F,{variant:"contained",color:"primary",onClick:u,style:{marginTop:"16px"},children:"Add Team"})]})})},V=()=>{var j;const[m,i]=a.useState(1),o=10,{data:t,error:n,isLoading:c,isFetching:d}=L({page:m,limit:o}),l=t==null?void 0:t.teams,u=(t==null?void 0:t.totalPages)||1,[s,p]=a.useState(!1),[x,C]=a.useState(""),T=O(x,300),[b,{isError:S,error:h}]=M(),v=a.useCallback(()=>p(!0),[]),A=a.useCallback(()=>p(!1),[]),k=a.useCallback(r=>C(r.target.value),[]),w=a.useCallback(async r=>{try{await b(r)}catch(g){console.log(g)}},[b]),N=a.useCallback(r=>{i(r)},[]),P=a.useMemo(()=>l?l.filter(r=>r.name.toLowerCase().includes(T.toLowerCase())).sort((r,g)=>g.points-r.points):[],[l,T]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h4",align:"center",gutterBottom:!0,children:"Teams"}),e.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",children:[e.jsx(I,{onClick:v,label:"Add"}),e.jsx(R,{label:"Search",value:x,onChange:k,placeholder:"Search Teams..."})]}),S||n&&e.jsx(q,{severity:"error",children:((j=h==null?void 0:h.data)==null?void 0:j.message)||n.message}),c||d?e.jsx(W,{rows:10,columns:4}):e.jsxs(e.Fragment,{children:[e.jsx(D,{teams:P,isDelete:!0,handleRemove:w,isAdmin:!0}),e.jsx(G,{page:m,totalPages:u,onPageChange:N})]}),e.jsx(Y,{open:s,handleClose:A})]})};export{V as default};
