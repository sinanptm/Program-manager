import{r,a3 as I,j as e,X as H,B as j,T as y,a0 as o,f as M,a as W}from"./index-WQM9_I6e.js";import{P as D}from"./ProgramList-DB5dGAPC.js";import{T as J,F as S,I as C,S as f}from"./TextField-D95_KcPd.js";import{F as P}from"./FilterButton-Dp7p1nCG.js";import{u as U,S as V,A as G,L as Q,P as R}from"./ListSkeleton-B9YTwGNg.js";import{A as X}from"./AddButton-DPRhBEm4.js";const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},K=({open:m,handleClose:p})=>{const[n,i]=r.useState(""),[c,u]=r.useState(""),[d,g]=r.useState(""),[t,h]=r.useState({}),[s]=I(),x=()=>{const a={};return n||(a.programName="Program name is required"),c||(a.category="Category selection is required"),d||(a.type="Type selection is required"),h(a),Object.keys(a).length===0},b=async()=>{if(x())try{await s({name:n,category:c,type:d}),i(""),u(""),g(""),h({}),p()}catch(a){console.error("Error adding program:",a)}};return e.jsx(H,{open:m,onClose:p,"aria-labelledby":"add-program-modal-title","aria-describedby":"add-program-modal-description",children:e.jsxs(j,{sx:z,children:[e.jsx(y,{id:"add-program-modal-title",variant:"h6",component:"h2",children:"Add New Program"}),e.jsx(J,{margin:"normal",required:!0,fullWidth:!0,id:"programName",label:"Program Name",name:"programName",autoFocus:!0,value:n,onChange:a=>i(a.target.value),error:!!t.programName,helperText:t.programName}),e.jsxs(S,{fullWidth:!0,margin:"normal",required:!0,error:!!t.category,children:[e.jsx(C,{id:"category-label",children:"Category"}),e.jsxs(f,{labelId:"category-label",id:"category",value:c,label:"Category",onChange:a=>u(a.target.value),children:[e.jsx(o,{value:"lp",children:"LP"}),e.jsx(o,{value:"up",children:"UP"}),e.jsx(o,{value:"hs",children:"HS"}),e.jsx(o,{value:"hss",children:"HSS"}),e.jsx(o,{value:"junior",children:"Junior"})]}),t.category&&e.jsx(y,{color:"error",variant:"caption",children:t.category})]}),e.jsxs(S,{fullWidth:!0,margin:"normal",required:!0,error:!!t.type,children:[e.jsx(C,{id:"type-label",children:"Type"}),e.jsxs(f,{labelId:"type-label",id:"type",value:d,label:"Type",onChange:a=>g(a.target.value),children:[e.jsx(o,{value:"on-stage",children:"On-Stage"}),e.jsx(o,{value:"off-stage",children:"Off-Stage"}),e.jsx(o,{value:"online",children:"Online"})]}),t.type&&e.jsx(y,{color:"error",variant:"caption",children:t.type})]}),e.jsx(M,{variant:"contained",color:"primary",onClick:b,style:{marginTop:"16px"},children:"Add Program"})]})})},re=()=>{const[m,p]=r.useState(1),n=10,[i,c]=r.useState(""),[u,d]=r.useState(""),[g,t]=r.useState(""),h=U(g,300),{data:s,error:x,isLoading:b,isFetching:a}=W({page:m,limit:n,status:i,category:u,search:h}),F=s==null?void 0:s.programs,T=(s==null?void 0:s.totalPages)||1,[k,v]=r.useState(!1),A=r.useCallback(()=>v(!0),[]),N=r.useCallback(()=>v(!1),[]),w=r.useCallback(l=>c(l),[]),O=r.useCallback(l=>d(l),[]),B=r.useCallback(l=>t(l.target.value),[]),E=r.useCallback(l=>{p(l)},[]),L=[{label:"None",value:""},{label:"Done",value:"done"},{label:"Evaluating",value:"evaluating"},{label:"Waiting",value:"waiting"}],q=[{label:"None",value:""},{label:"LP",value:"lp"},{label:"UP",value:"up"},{label:"HS",value:"hs"},{label:"HSS",value:"hss"},{label:"Junior",value:"junior"}];return e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"h4",align:"center",gutterBottom:!0,children:"Programs"}),e.jsxs(j,{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",children:[e.jsx(X,{onClick:A,label:"Add"}),e.jsx(V,{label:"Search",value:g,onChange:B,placeholder:"Search programs..."}),e.jsxs(j,{display:"flex",gap:"16px",children:[e.jsx(P,{label:"Status",options:L,selectedValue:i,onChange:w}),e.jsx(P,{label:"Category",options:q,selectedValue:u,onChange:O})]})]}),x&&e.jsx(G,{severity:"error",children:x.message}),b||a?e.jsx(Q,{rows:10,columns:5}):e.jsxs(e.Fragment,{children:[e.jsx(D,{programs:F,isAdmin:!0}),e.jsx(R,{page:m,totalPages:T,onPageChange:E})]}),e.jsx(K,{open:k,handleClose:N})]})};export{re as default};
